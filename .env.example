# ==============================================================================
# Gut Reaction Platform - Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# ==============================================================================

# ------------------------------------------------------------------------------
# General Settings
# ------------------------------------------------------------------------------
ENVIRONMENT=development
LOG_LEVEL=INFO
DEBUG=true

# ------------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# ------------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=admin
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION
POSTGRES_DB=gut_reaction_db

# Connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ------------------------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ------------------------------------------------------------------------------
# Phenotype NLP Service
# ------------------------------------------------------------------------------
NLP_SERVICE_PORT=8001
NLP_MODEL_PATH=/models/en_core_sci_lg
NLP_BATCH_SIZE=50
NLP_MAX_LENGTH=1000000

# ------------------------------------------------------------------------------
# Visual Governance Auditor
# ------------------------------------------------------------------------------
AUDITOR_SERVICE_PORT=8003

# Vision-Language Model Configuration
# Options: openai, huggingface, local
VLM_PROVIDER=openai

# OpenAI Configuration (if using GPT-4V)
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4-vision-preview
OPENAI_MAX_TOKENS=4096

# HuggingFace Configuration (if using LLaVA)
HF_API_TOKEN=hf_your-token-here
HF_MODEL=llava-hf/llava-v1.6-mistral-7b-hf

# Audit settings
AUDIT_LOG_PATH=/var/log/audit
AUDIT_RETENTION_DAYS=365

# ------------------------------------------------------------------------------
# Clinical Ingestion Service
# ------------------------------------------------------------------------------
INGESTION_SERVICE_PORT=8002
CLINICAL_DATA_PATH=/data/clinical
TRUST_MAPPING_PATH=/config/trust_mappings

# Supported trusts (comma-separated)
SUPPORTED_TRUSTS=CAMBS,LEEDS,MANCH,LPOOL

# ------------------------------------------------------------------------------
# Genomic Bridge Service
# ------------------------------------------------------------------------------
BRIDGE_SERVICE_PORT=8004
HPC_DATA_PATH=/mnt/hpc/data
LINKAGE_KEY_PATH=/secure/mpi

# Air gap settings
ENABLE_HPC_SYNC=false
HPC_SSH_HOST=hpc.example.com
HPC_SSH_USER=svc_bridge
HPC_SSH_KEY_PATH=/secrets/hpc_key

# ------------------------------------------------------------------------------
# Authentication (Keycloak)
# ------------------------------------------------------------------------------
AUTH_ENABLED=true
KEYCLOAK_URL=https://auth.gut-reaction.nhs.uk
KEYCLOAK_REALM=research
KEYCLOAK_CLIENT_ID=gut-reaction-api
KEYCLOAK_CLIENT_SECRET=your-client-secret

# JWT Settings
JWT_SECRET_KEY=CHANGE_ME_GENERATE_STRONG_SECRET
JWT_ALGORITHM=HS256
JWT_EXPIRY_MINUTES=15

# ------------------------------------------------------------------------------
# API Gateway (NGINX)
# ------------------------------------------------------------------------------
GATEWAY_PORT=8000
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# SSL/TLS (production only)
SSL_ENABLED=false
SSL_CERT_PATH=/certs/fullchain.pem
SSL_KEY_PATH=/certs/privkey.pem

# ------------------------------------------------------------------------------
# Monitoring & Observability
# ------------------------------------------------------------------------------
# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Jaeger tracing
TRACING_ENABLED=false
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831

# Sentry error tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ------------------------------------------------------------------------------
# Email Notifications
# ------------------------------------------------------------------------------
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=notifications@example.com
SMTP_PASSWORD=
SMTP_FROM_ADDRESS=noreply@gut-reaction.nhs.uk

# Alert recipients (comma-separated)
ALERT_EMAILS=admin@example.com,security@example.com

# ------------------------------------------------------------------------------
# Storage (S3-Compatible)
# ------------------------------------------------------------------------------
S3_ENABLED=false
S3_ENDPOINT=https://s3.amazonaws.com
S3_BUCKET=gut-reaction-data
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=eu-west-2

# ------------------------------------------------------------------------------
# Feature Flags
# ------------------------------------------------------------------------------
FEATURE_VISUAL_AUDIT=true
FEATURE_BATCH_PROCESSING=true
FEATURE_HPC_INTEGRATION=false
FEATURE_REALTIME_ALERTS=true
